<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Now Playing - Template Selector</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #1e1e1e;
            color: white;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 500px;
            width: 100%;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #1db954;
        }
        .template-card {
            background: #2b2b2b;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .template-card:hover {
            border-color: #1db954;
            transform: translateY(-2px);
        }
        .template-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .template-desc {
            font-size: 14px;
            color: #b3b3b3;
        }
        .current-template {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
            color: #1db954;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –≤–∏–¥–∂–µ—Ç–∞</h1>

        <div class="template-card" onclick="loadTemplate('visualisation.html')">
            <div class="template-name">üé® –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π</div>
            <div class="template-desc">–ï–¥–∏–Ω–∞—è –ø–æ–¥–ª–æ–∂–∫–∞, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω</div>
        </div>

        <div class="template-card" onclick="loadTemplate('visualisation_var2.html')">
            <div class="template-name">‚ú® –ú–æ–¥–µ—Ä–Ω</div>
            <div class="template-desc">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏</div>
        </div>

        <div class="template-card" onclick="loadTemplate('visualisation_var3.html')">
            <div class="template-name">üéØ –ú–æ–¥—É–ª—å–Ω—ã–π</div>
            <div class="template-desc">3 –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–¥–ª–æ–∂–∫–∏</div>
        </div>

        <div class="current-template" id="currentTemplate">
            –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω
        </div>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –∏–∑ URL –∏–ª–∏ localStorage
        const urlParams = new URLSearchParams(window.location.search);
        const templateFromUrl = urlParams.get('template');
        const savedTemplate = localStorage.getItem('selectedTemplate');

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫–æ–π —à–∞–±–ª–æ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å
        let targetTemplate = templateFromUrl || savedTemplate || 'visualisation.html';

        // –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä auto
        if (urlParams.get('auto') === '1') {
            window.location.href = targetTemplate + window.location.search;
        }

        function loadTemplate(templateName) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä
            localStorage.setItem('selectedTemplate', templateName);

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
            document.getElementById('currentTemplate').textContent =
                `–ü—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–±–ª–æ–Ω: ${getTemplateDisplayName(templateName)}`;

            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–±–ª–æ–Ω—É
            window.location.href = templateName;
        }

        function getTemplateDisplayName(filename) {
            const names = {
                'visualisation.html': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π',
                'visualisation_var2.html': '–ú–æ–¥–µ—Ä–Ω',
                'visualisation_var3.html': '–ú–æ–¥—É–ª—å–Ω—ã–π'
            };
            return names[filename] || filename;
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω
        if (savedTemplate) {
            document.getElementById('currentTemplate').textContent =
                `–ü—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–±–ª–æ–Ω: ${getTemplateDisplayName(savedTemplate)}`;
        }
    </script>
</body>
</html>